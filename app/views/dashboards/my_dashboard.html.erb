<div class="container mt-4">
  <div class="row">
  <!---------------------USER INFO-------------------------------------->
    <div class="col-4">
      <div class ="card-dashboard d-flex flex-column align-center align-items-center">

      <% if current_user.photo.attached?  %>
        <%= cl_image_tag(current_user.photo.key, width: 200, height: 200, gravity: "faces", crop: "thumb", class: "avatar-box") %>
      <% else %>
        <img src="https://www.sibberhuuske.nl/wp-content/uploads/2016/10/default-avatar.png" alt="avatar" class="avatar-box" >
      <% end %>

          <div class="dg-margin-bottom mt-3">
            <span class="fs-5 text-gray-400 text-hover-primary fw-medium"><%= current_user.first_name %> <%= current_user.last_name %></span>
            <a href="users/<%= @user.id %>/edit"><i class="fas fa-edit"></i></a>
          </div>

        <div class="card-dog-list p-4">
          <% if !@my_dogs.empty?%>
          <div class= "d-flex justify-content-between">
            <h5 class="fw-bold">My dogs </h5>
            <a class= "btn btn-light btn-sm ms-5" href="dogs/new">Add new</a>
          </div>

            <% @my_dogs.each do |dog| %>
            <div class = "mt-3">
              <div class="my-dog-card">
              <div class= "mt-4 d-flex justify-content-between">
              <h2 class = "link-dog-show"><%= link_to dog.name, dog_path(dog) %></h2>

                  <div class="icons-dashboard">
                    <a href="dogs/<%= dog.id %>" class = "me-2"><i class="fas fa-edit"></i></a>
                    <a data-confirm="Are you sure?" data-method="delete" href="dogs/<%= dog.id %>"><i class="fas fa-trash"></i></a>
                  </div>
                </div>
              </div>
            </div>
            <% end %>
          <% else %>
            <div class="my-alert" role="alert">
              Your dog list is empty. <%= link_to "Add a dog", new_dog_path, class: "alert-link" %> now.
            </div>
          <% end %>
        </div>
        </div>
    </div><!--col-4-->

<!-------------------------MY BOOKINGS---------------------------------->
    <div class="col-8">
    <div class="card-dashboard">
      <div class="dg-margin-bottom">
        <h4 class= "mb-4">My bookings</h4>
        <% if !@my_bookings.empty?%>
          <% @my_bookings.each do |booking| %>
              <div class="card-product mb-4">
              <% if booking.dog.photos.attached?  %>
                <%= cl_image_tag(booking.dog.photos.first.key) %>
              <% else %>
                <img src="https://www.sibberhuuske.nl/wp-content/uploads/2016/10/default-avatar.png" alt="dog photo">
              <% end %>
                <%#= cl_image_tag booking.dog.photos.first.key  %>
                <div class="container d-flex justify-content-between">
                  <div>
                    <h2><%= link_to booking.dog.name, dog_path(booking.dog.id) %> booked!</h2>
                    <p>For : <strong> <%= booking.date %></strong></p>
                  </div>
                  <%= link_to "Cancel my booking", dog_booking_path(booking.dog, booking), method: :delete, data: {confirm: "Are you sure"} %>
                </div>
              </div>
          <% end %>
          <% else %>
              <div class="my-alert " role="alert">
                No history of bookings. <%= link_to "Rent a dog now", dogs_path, class: "alert-link" %>.
              </div>
            <% end %>
      </div>
<!-------------------------BOOKING REQUESTS---------------------------------->
      <h4 class = "mb-4">Booking requests</h4>
        <% if !@received_bookings.empty?%>
          <% @received_bookings.each do |booking| %>
            <div class="card-product mb-4">
              <% if booking.user.photo.attached?  %>
                <%= cl_image_tag(booking.user.photo.key, width: 200, height: 200, gravity: "faces", crop: "thumb") %>
              <% else %>
                <img src="https://www.sibberhuuske.nl/wp-content/uploads/2016/10/default-avatar.png" alt="dog photo">
              <% end %>


                <div class="container d-flex justify-content-between">
                  <div>
                    <h2><%= link_to booking.dog.name, dog_path(booking.dog.id) %> booked by <%= booking.user.first_name %></h2>
                    <p>For : <strong> <%= booking.date %></strong></p>
                    <span class="badge badge-pill badge-danger"><%= booking.status %></span>

                  </div>
                  <div>
                    <% if booking.pending? %>
                      <%= link_to "Accept", accept_booking_path(booking), method: :patch %>
                      <%= link_to "Decline", decline_booking_path(booking), method: :patch %>
                    <% elsif booking.approved? %>
                      <%= link_to "Cancel confirmed booking", decline_booking_path(booking), method: :patch, class: "btn btn-dark" %>
                    <% elsif booking.declined? %>
                      <%= link_to "Archive", archive_booking_path(booking), method: :patch %>
                    <% end %>
                  </div>
                </div>
            </div><!--card-product-->
          <% end %>
          <% else %>
            <div class="my-alert" role="alert">
              You don't have any incoming requests.
            </div>
          <% end %>
    </div>
    </div><!--col-8-->
  </div><!--main row-->
</div><!--main container-->
